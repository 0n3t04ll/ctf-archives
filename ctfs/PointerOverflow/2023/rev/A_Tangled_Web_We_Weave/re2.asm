section .data
    encoded_message db 0x69, 0x7a, 0x7d, 0x6a, 0x24, 0x76, 0x79, 0x6a, 0x7d, 0x6a, 0x6c, 0x24, 0x7d, 0x76, 0x73, 0x24, 0x70, 0x6e, 0x7d, 0x6b, 0x5b, 0x6e, 0x76, 0x7d, 0x71, 0x63, 0x7d, 0x74, 0x24, 0x7d, 0x69, 0x73, 0x73, 0x6b, 0x71, 0x5b, 0x7d, 0x6e, 0x6c, 0x73, 0x24, 0x6f, 0x6e, 0x7d, 0x68, 0x73, 0x6e, 0x39, 0x6e, 0x24, 0x6f, 0x6e, 0x5f, 0x6d, 0x33, 0x7d, 0x00

section .text
    global _start

_start:
    mov ecx, 0
    mov edi, encoded_message
    find_length:
        cmp byte [edi], 0
        je print_message
        inc ecx
        inc edi
        jmp find_length

    print_message:
        xor esi, esi
        mov edi, encoded_message
        decode:
            xor eax, eax
            mov al, byte [edi + esi]
            xor al, ; something missing?
            mov byte [edi + esi], al
            inc esi
            cmp byte [edi + esi], 0
            jne decode

        mov edx, ecx
        mov eax, 4
        mov ebx, 1
        mov ecx, encoded_message
        int 0x80

    mov eax, 1
    xor ebx, ebx
    int 0x80
