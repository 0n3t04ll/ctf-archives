# Web 3 WELCOME

Данный таск создан для ознакомления с категорией и платформой, которая предоставляет уязвимые контракты.

Вы можете свободно пользоваться этим гайдом и решить при помощи него задание. Однако дальше такой халявы не будет, исключение только тут.

Это нужно для того, чтобы кто угодно мог попробовать свои силы в этой новой категории заданий и перейти к более сложным задачам.

## Как решить

### 1. Получить тикет
Пройдите в [профиль вашей команды](https://mctf.mtuci.ru), скопируйте тикет. В будущем он понадобиться для получения своей копии задания.

**!!! ВАЖНО - НИКОМУ НЕ ПЕРЕДАВАЙТЕ СВОЙ ТИКЕТ!!!

Последствия необратимы, пощады не будет.** 


### 2. Скачать и проанализировать файлы

В прикрепленных файлах вы имеете два файла.
Что они делают:
 - Setup.sol - контракт-деплоер, демонстрирует каким именно образом будет создан уязвимый контракт и по какому правилу он будет считаться решённым.
 - Chal.sol - уязвимый контракт, название будет не обязательно именно таким. Именно его вам предстоит ломать.

Ваша задача добиться от уязвимого контракта такого состояния,при котором он будет считаться как решённый контрактом-деплоером.

В данном случае всё просто - надо вызвать функцию `solve()` контракта `Chal`

### 3. Создать свою копию задания

Для создания копии задания пройдите по ncat порту, указанному в описании задания

Там вас встретит простой интерфейс с тремя пунктами:
1. Создать копию
2. Уничтожить копию
3. Получить флаг

Каждое из действий запрашивает тикет, который вы получили на платформе.

После создания копии задания вы получаете информацию о созданной копии, которая пригодится для дальнейшего решения:

```
$ nc ctf.example.xyz 31337
1 - launch new instance
2 - kill instance
3 - get flag
action? 1
ticket please: ticket

your private blockchain has been deployed
it will automatically terminate in 30 minutes
here's some useful information
uuid:           12341234-12341234-12341234
rpc endpoint:   http://ctf.example.xyz:8545/12341234-12341234-12341234")
private key:    0xabcdabcdabcdabcdabcdabcdabcdabcdabcdabcdabcd
setup contract: 0x1234123412341234123412341234123412341234
```

 - UUID - идентификатор вашей копии задания
 - Адрес JSON-RPC клиента, по которому вы можете взаимодействовать с своим инстансом задания.
 - Приватный ключ от вашего аккаунта
 - Адрес вашего аккаунта
 - Адрес контракта-деплоера - в данном случае адрес контракта `Setup`

Рекомендую поместить все эти значения в переменные окружения вашего терминала т.к. они вам ещё понадобятся. 

### 4. Создать уязвимый контракт
Для взаимодействия с блокчейном вам понадобиться любой клиент, который поддерживает JSON-RPC.

В качестве примера будет использоваться CLI инструмент Cast из пакета инструментов [Foundry](https://book.getfoundry.sh/)

Вот так можно будет выполнить вызов в контракту-деплоеру для создания уязвимого контракта:

```bash
cast call --rpc-url $RPC $SETUP_CONTRACT_ADDRESS "challenge()"

```

В ответ получим адрес нашего уязвимого контракта

```bash
0x000000000000000000000000ada0c6f1341aa66a45b3e3256c98034118590c42
```

Обратите внимание, что для корректной передачи этого значения в следующую команду надо убрать лишние нули (длина адреса контракта с учётом *0х* - 42). Получится `0xada0c6f1341aa66a45b3e3256c98034118590c42`


### 5. Вызвать функцию solve()

Для финального шага мы так же через *cast* вызываем метод *solve()*:

```bash
cast send --rpc-url $RPC --private-key $PRIVATE_KEY 0xada0c6f1341aa66a45b3e3256c98034118590c42 "solve()"
```

При успешном вызове вывод будет содержать множество параметров, такие как:
```
blockHash: 0x....
blockNumber: 9924256
...
status                  1
transactionHash         0x.....
transactionIndex        0
type                    2
```

Это говорит о том, что у вас получилось вызвать функцию.

### 6. Получить флаг
После того, как вы успешно вызвали функцию `solve()` вам достаточно вернуться к сервису из третьего пункта и там выбрать получение флага. 

Если всё сделали правильно - получите флаг, который сможете сдать в карточке таска.
